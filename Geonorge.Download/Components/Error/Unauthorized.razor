@page "/error/unauthorized"
@using Geonorge.Download.Resources
@using Microsoft.AspNetCore.Components.Routing
@inject NavigationManager Nav

<div class="container page-not-found-container">
    <h1>@UI.UnauthorizedText</h1>

    <p class="lead" style="margin-top:1rem;">
        <a class="btn btn-primary" href="@LoginUrl()">Logg inn</a>
        <a class="btn btn-link" href="@Nav.BaseUri">Til forsiden </a>
    </p>
</div>

@code {
    [Parameter, SupplyParameterFromQuery(Name = "returnUrl")]
    public string? ReturnUrl { get; set; }

    private string LoginUrl()
    {
        var target = string.IsNullOrEmpty(ReturnUrl) ? Nav.BaseUri : ReturnUrl;
        var encoded = Uri.EscapeDataString(target);
        return $"account/login?returnUrl={encoded}";
    }
}
